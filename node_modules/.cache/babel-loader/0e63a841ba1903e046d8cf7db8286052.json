{"ast":null,"code":"import sw from 'sweetalert2';\nimport Decode from 'jwt-decode';\n\nvar encode = function encode(file) {\n  var reader = new FileReader();\n\n  reader.onloadend = function () {\n    return reader.result;\n  };\n\n  return reader.readAsDataURL(file);\n};\n/* API */\n\n\nvar proxy = 'http://192.168.40.88:4000/api/';\nvar proxylogin = 'http://192.168.40.88:4000/login';\n/*let header = {\r\n    'Accept': 'application/json',\r\n    'Content-Type': 'application/json'\r\n}*/\n\nvar token = 'Bearer ' + localStorage.getItem('token');\nvar head1 = {\n  'Content-Type': 'application/json',\n  'Authorization': token\n};\nvar head2 = {\n  'Authorization': token\n};\n\nvar apiGet = function apiGet(url) {\n  if (loggedin()) {\n    //header['Authorization']= 'Bearer ' + localStorage.getItem('token');\n    return fetch(proxy + url, {\n      method: 'get',\n      head1: head1\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      return data;\n    });\n  }\n};\n\nvar apiGet1 = function apiGet1(url, params1) {\n  return fetch(proxy + url + '/' + params1, {\n    method: 'get'\n  }).then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    return data;\n  });\n};\n\nvar apiGet2 = function apiGet2(url, params1, params2) {\n  return fetch(proxy + url + '/' + params1 + '/' + params2, {\n    method: 'get'\n  }).then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    return data;\n  });\n};\n\nvar apiPostFormdata = function apiPostFormdata(url, data) {\n  return fetch(proxy + url, {\n    method: 'post',\n    body: data\n  }).then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    return data;\n  });\n};\n\nvar apiPostJson = function apiPostJson(url, data) {\n  return fetch(proxy + url, {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  }).then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    return data;\n  });\n};\n\nvar apiLogin = function apiLogin(data) {\n  return fetch(proxylogin, {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  }).then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    return data;\n  });\n};\n/* API */\n\n/* SWET ALERT */\n\n\nvar msgerror = function msgerror(msg) {\n  sw.fire({\n    type: 'error',\n    title: 'Oops...',\n    text: msg\n  });\n};\n\nvar msgok = function msgok(msg, url) {\n  sw.fire({\n    type: \"success\",\n    title: \"Berhasil\",\n    text: msg\n  }).then(function () {\n    window.location.href = url;\n  });\n};\n/* SWET ALERT */\n\n/* Auth */\n\n\nvar login = function login(user, pass) {\n  var data = {\n    name: user,\n    pass: pass\n  };\n  return apiLogin(data).then(function (res) {\n    if (res.sucess) {\n      localStorage.setItem('token', res.token);\n      msgok('Berhasil Login', '/');\n    } else {\n      msgerror('Username Dan Password Salah');\n    }\n  });\n};\n\nvar loggedin = function loggedin() {\n  var token = localStorage.getItem('token');\n  return !!token && !isTokenExpired(token);\n};\n\nvar isTokenExpired = function isTokenExpired(token) {\n  try {\n    var decode = Decode(token);\n\n    if (decode.exp < Date.now() / 1000) {\n      return true;\n    } else {\n      return false;\n    }\n  } catch (err) {\n    return false;\n  }\n};\n\nvar getProfile = function getProfile() {\n  return Decode(localStorage.getItem('token'));\n};\n\nvar logout = function logout() {\n  msgok('Berhasil Logout', '/login');\n  localStorage.removeItem('token');\n};\n/* Auth */\n\n\nexport default {\n  encode: encode,\n  proxy: proxy,\n  apiGet: apiGet,\n  apiGet1: apiGet1,\n  apiGet2: apiGet2,\n  apiPostJson: apiPostJson,\n  apiPostFormdata: apiPostFormdata,\n  msgerror: msgerror,\n  msgok: msgok,\n  login: login,\n  loggedin: loggedin,\n  getProfile: getProfile,\n  logout: logout\n};","map":{"version":3,"sources":["D:\\job\\web\\Midas\\Midas-Client\\src\\app.js"],"names":["sw","Decode","encode","file","reader","FileReader","onloadend","result","readAsDataURL","proxy","proxylogin","token","localStorage","getItem","head1","head2","apiGet","url","loggedin","fetch","method","then","res","json","data","apiGet1","params1","apiGet2","params2","apiPostFormdata","body","apiPostJson","headers","JSON","stringify","apiLogin","msgerror","msg","fire","type","title","text","msgok","window","location","href","login","user","pass","name","sucess","setItem","isTokenExpired","decode","exp","Date","now","err","getProfile","logout","removeItem"],"mappings":"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","sourcesContent":["import sw from 'sweetalert2';\r\nimport Decode from 'jwt-decode';\r\n\r\n\r\nlet encode = (file)=>{\r\n\r\nvar reader = new FileReader();\r\nreader.onloadend = ()=>{\r\n    return reader.result;\r\n}\r\n\r\nreturn reader.readAsDataURL(file)\r\n\r\n    \r\n}\r\n\r\n/* API */\r\n\r\n    let proxy = 'http://192.168.40.88:4000/api/';\r\n    let proxylogin = 'http://192.168.40.88:4000/login';\r\n    /*let header = {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n    }*/\r\n\r\n    let token = 'Bearer ' + localStorage.getItem('token');\r\n    let head1 = {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': token\r\n    };\r\n\r\n    let head2 = {\r\n        'Authorization': token\r\n    }\r\n\r\n    let apiGet = (url)=>{\r\n\r\n        if (loggedin()) {\r\n            //header['Authorization']= 'Bearer ' + localStorage.getItem('token');\r\n\r\n            return fetch(proxy+url , {\r\n                method: 'get',\r\n                head1\r\n            })\r\n            .then(res => res.json())\r\n            .then(data =>{\r\n                return data\r\n            })\r\n        }\r\n\r\n\r\n       \r\n    }\r\n\r\n    let apiGet1 = (url , params1)=>{\r\n        return fetch(proxy+url+'/'+params1 , {\r\n            method: 'get'\r\n        })\r\n        .then(res => res.json())\r\n        .then(data =>{\r\n            return data\r\n        })\r\n    }\r\n\r\n    let apiGet2 = (url , params1 , params2)=>{\r\n        return fetch(proxy+url+'/'+params1+'/'+params2 , {\r\n            method: 'get'\r\n        })\r\n        .then(res => res.json())\r\n        .then(data =>{\r\n            return data\r\n        })\r\n    }\r\n\r\n\r\n    let apiPostFormdata = (url , data)=>{\r\n        return fetch(proxy+url,{\r\n            method: 'post',\r\n            body: data\r\n        })\r\n        .then(res => res.json())\r\n        .then(data =>{\r\n            return data;\r\n        })\r\n    }\r\n\r\n\r\n    let apiPostJson = (url , data)=>{\r\n        return fetch(proxy+url,{\r\n            method: 'post',\r\n            headers: { 'Content-Type':'application/json'},\r\n            body: JSON.stringify(data)\r\n        })\r\n        .then(res => res.json())\r\n        .then(data =>{\r\n            return data;\r\n        })\r\n    }\r\n\r\n    let apiLogin = (data)=>{\r\n        return fetch(proxylogin,{\r\n            method: 'post',\r\n            headers: { 'Content-Type':'application/json'},\r\n            body: JSON.stringify(data)\r\n        })\r\n        .then(res => res.json())\r\n        .then(data =>{\r\n            return data;\r\n        })\r\n    }\r\n/* API */\r\n\r\n/* SWET ALERT */\r\n    let msgerror = (msg) =>{\r\n        sw.fire({\r\n        type: 'error',\r\n        title: 'Oops...',\r\n        text: msg\r\n        })\r\n    }\r\n\r\n    let msgok =(msg , url)=>{\r\n        sw.fire({\r\n            type: \"success\",\r\n            title: \"Berhasil\",\r\n            text: msg  \r\n        }).then(()=>{\r\n            window.location.href = url\r\n        })\r\n    }\r\n/* SWET ALERT */\r\n\r\n/* Auth */\r\n\r\n    let login = (user , pass)=>{\r\n        let data = {\r\n            name: user,\r\n            pass: pass\r\n        }\r\n        return apiLogin(data)\r\n                .then(res =>{\r\n                    if (res.sucess) {\r\n                        localStorage.setItem('token',res.token)\r\n                        msgok('Berhasil Login','/')\r\n                    \r\n                    }else{\r\n                        msgerror('Username Dan Password Salah')\r\n                    }\r\n                })\r\n    }\r\n\r\n    let loggedin = ()=>{\r\n        let token = localStorage.getItem('token');\r\n        return !!token && !isTokenExpired(token)\r\n    \r\n\r\n    }\r\n\r\n    let isTokenExpired = (token)=>{\r\n        try{\r\n            let decode = Decode(token);\r\n\r\n            if (decode.exp < Date.now() / 1000){\r\n                return true\r\n            }else{\r\n                return false\r\n            }\r\n        }\r\n\r\n        catch(err){\r\n            return false;\r\n        }\r\n    }\r\n\r\n    let getProfile = ()=>{\r\n        return Decode(localStorage.getItem('token'));\r\n    }\r\n\r\n    let logout = ()=>{\r\n        msgok('Berhasil Logout','/login')\r\n        localStorage.removeItem('token')\r\n      \r\n    }\r\n\r\n\r\n/* Auth */\r\n\r\n\r\nexport default { encode , \r\n                 proxy , \r\n                 apiGet , \r\n                 apiGet1 , \r\n                 apiGet2 ,\r\n                 apiPostJson ,\r\n                 apiPostFormdata , \r\n                 msgerror , \r\n                 msgok ,\r\n                 login , \r\n                 loggedin ,\r\n                 getProfile ,\r\n                 logout}"]},"metadata":{},"sourceType":"module"}