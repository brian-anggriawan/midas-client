{"ast":null,"code":"import _classCallCheck from \"D:\\\\job\\\\web\\\\Midas\\\\Midas-Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\job\\\\web\\\\Midas\\\\Midas-Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\job\\\\web\\\\Midas\\\\Midas-Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\job\\\\web\\\\Midas\\\\Midas-Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\job\\\\web\\\\Midas\\\\Midas-Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\job\\\\web\\\\Midas\\\\Midas-Client\\\\src\\\\views\\\\list-access-repo\\\\list-access-repo.jsx\";\nimport React from 'react';\nimport Pageadmin from 'layouts/page-admin';\nimport { Row, Col, FormGroup, Button } from 'reactstrap';\nimport Formacc from './form_access_repo';\nimport Scroll from 'simplebar-react';\nimport Select from 'react-select';\nimport Tabel from 'layouts/tabel';\nimport app from 'app';\n\nvar listAccessmenu =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(listAccessmenu, _React$Component);\n\n  function listAccessmenu() {\n    var _this;\n\n    _classCallCheck(this, listAccessmenu);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(listAccessmenu).call(this));\n\n    _this.dpt = function (e) {\n      app.apiGet1('dpt', e.value).then(function (res) {\n        var data = [];\n        res.map(function (x) {\n          return data.push({\n            value: x.SYSTEM_ID,\n            label: x.DIVISION\n          });\n        });\n\n        _this.setState({\n          dpt: data,\n          idsbu: e.value\n        });\n      });\n    };\n\n    _this.user = function (e) {\n      app.apiGet2('userFilter', _this.state.idsbu, e.value).then(function (res) {\n        var data = [];\n        res.map(function (x) {\n          return data.push({\n            value: x.IDLOGIN,\n            label: x.USERNAME\n          });\n        });\n\n        _this.setState({\n          user: data\n        });\n      });\n\n      _this.setState({\n        iddept: e.value\n      });\n    };\n\n    _this.data = function (e) {\n      app.apiGet1('accessrepo', e.value).then(function (res) {\n        _this.setState({\n          data: res\n        });\n      });\n\n      _this.setState({\n        iduser: e.value\n      });\n    };\n\n    _this.refresh = function () {\n      app.apiGet1('accessrepo', _this.state.iduser).then(function (res) {\n        _this.setState({\n          data: res\n        });\n      });\n    };\n\n    _this.mode = function () {\n      if (_this.state.iduser !== '') {\n        app.apiGet2('accessrepo/repo', _this.state.iddept, _this.state.iduser).then(function (res) {\n          _this.setState({\n            repo: res\n          });\n        });\n\n        _this.setState({\n          modal: !_this.state.modal\n        });\n      } else {\n        app.msgerror('Belum Memilih User');\n      }\n    };\n\n    _this.action = function (id) {\n      return React.createElement(Button, {\n        color: \"danger\",\n        onClick: function onClick() {\n          return _this.delete(id);\n        },\n        size: \"sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \" Delete Hak Akses \");\n    };\n\n    _this.state = {\n      sbu: [],\n      dpt: [],\n      user: [],\n      data: [],\n      modal: false,\n      repo: [],\n      idsbu: '',\n      iddept: '',\n      iduser: ''\n    };\n    return _this;\n  }\n\n  _createClass(listAccessmenu, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      app.apiGet('sbu').then(function (res) {\n        var data = [];\n        res.map(function (x) {\n          return data.push({\n            value: x.SYSTEM_ID,\n            label: x.SBU\n          });\n        });\n\n        _this2.setState({\n          sbu: data\n        });\n      });\n\n      if (app.dataUser[0].ACCESS === 2) {\n        app.apiGet2('userFilter', this.state.idsbu, e.value).then(function (res) {\n          var data = [];\n          res.map(function (x) {\n            return data.push({\n              value: x.IDLOGIN,\n              label: x.USERNAME\n            });\n          });\n\n          _this2.setState({\n            user: data\n          });\n        });\n        this.setState({\n          iddept: e.value\n        });\n      }\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(idrepo) {\n      var _this3 = this;\n\n      app.apiDelete('accessrepo', {\n        id: idrepo\n      }).then(function (data) {\n        if (data) {\n          _this3.refresh();\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Pageadmin, {\n        head: 'List Access Repository',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, app.dataUser[0].ACCESS === 2 ? React.createElement(Row, {\n        style: {\n          marginBottom: '20px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(Select, {\n        clearable: true,\n        options: this.state.user,\n        placeholder: 'Pilih User',\n        onChange: this.data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      })))) : React.createElement(Row, {\n        style: {\n          marginBottom: '20px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(Select, {\n        options: this.state.sbu,\n        placeholder: 'Pilih SBU',\n        onChange: this.dpt,\n        id: \"sbu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        md: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(Select, {\n        options: this.state.dpt,\n        placeholder: 'Pilih Division',\n        onChange: this.user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        md: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(Select, {\n        clearable: true,\n        options: this.state.user,\n        placeholder: 'Pilih User',\n        onChange: this.data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      })))), React.createElement(Button, {\n        type: \"button\",\n        color: \"default\",\n        className: \"mb--1\",\n        onClick: this.mode,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \"Tambah Akses Repository\"), React.createElement(Formacc, {\n        modal: this.state.modal,\n        mode: this.mode,\n        repo: this.state.repo,\n        user: this.state.iduser,\n        test: this.refresh,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }), React.createElement(Scroll, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(Tabel, {\n        data: this.state.data,\n        columns: [{\n          dataField: 'REPOSITORY',\n          text: 'Priode'\n        }, {\n          dataField: 'JENIS_REPO',\n          text: 'Kategori'\n        }, {\n          dataField: 'IDACC_REPO',\n          formatter: this.action,\n          text: 'Action'\n        }],\n        keyField: 'IDACC_REPO',\n        width: {\n          width: '380px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return listAccessmenu;\n}(React.Component);\n\nexport default listAccessmenu;","map":{"version":3,"sources":["D:\\job\\web\\Midas\\Midas-Client\\src\\views\\list-access-repo\\list-access-repo.jsx"],"names":["React","Pageadmin","Row","Col","FormGroup","Button","Formacc","Scroll","Select","Tabel","app","listAccessmenu","dpt","e","apiGet1","value","then","res","data","map","x","push","SYSTEM_ID","label","DIVISION","setState","idsbu","user","apiGet2","state","IDLOGIN","USERNAME","iddept","iduser","refresh","mode","repo","modal","msgerror","action","id","delete","sbu","apiGet","SBU","dataUser","ACCESS","idrepo","apiDelete","marginBottom","dataField","text","formatter","width","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Pageadmin from 'layouts/page-admin';\r\nimport { Row , Col , FormGroup , Button } from 'reactstrap';\r\nimport Formacc from './form_access_repo';\r\nimport Scroll from 'simplebar-react';\r\nimport Select from 'react-select';\r\nimport Tabel from 'layouts/tabel';\r\nimport app from 'app';\r\n\r\n\r\n\r\nclass listAccessmenu extends React.Component{\r\nconstructor(){\r\n    super()\r\n    this.state = {\r\n        sbu: [],\r\n        dpt: [],\r\n        user:[],\r\n        data:[],\r\n        modal: false,\r\n        repo:[],\r\n        idsbu:'',\r\n        iddept:'',\r\n        iduser:'',\r\n\r\n    }\r\n}\r\n\r\n\r\ncomponentDidMount(){\r\n    app.apiGet('sbu')\r\n       .then(res =>{\r\n\r\n        let data = [];\r\n        res.map( x =>\r\n                data.push({\r\n                    value: x.SYSTEM_ID,\r\n                    label: x.SBU\r\n                })\r\n            )\r\n           this.setState({\r\n               sbu: data\r\n           })\r\n       })\r\n\r\n    if (app.dataUser[0].ACCESS === 2) {\r\n            app.apiGet2('userFilter',this.state.idsbu , e.value)\r\n            .then(res =>{\r\n                let data = [];\r\n    \r\n                res.map(x =>\r\n                    data.push({\r\n                        value: x.IDLOGIN,\r\n                        label: x.USERNAME\r\n                    })\r\n                )\r\n                this.setState({\r\n                    user: data\r\n                })\r\n            })\r\n        \r\n        this.setState({\r\n            iddept: e.value\r\n        })\r\n    }\r\n}\r\n\r\n\r\ndpt = (e)=>{\r\n    app.apiGet1('dpt',e.value)\r\n       .then(res =>{\r\n           let data = [];\r\n           res.map(x =>\r\n                data.push({\r\n                    value: x.SYSTEM_ID,\r\n                    label: x.DIVISION\r\n                })\r\n            )\r\n           this.setState({\r\n               dpt: data,\r\n               idsbu: e.value\r\n           })\r\n       })  \r\n}\r\n\r\nuser = (e) =>{\r\n  \r\n    app.apiGet2('userFilter',this.state.idsbu , e.value)\r\n       .then(res =>{\r\n           let data = [];\r\n\r\n           res.map(x =>\r\n                data.push({\r\n                    value: x.IDLOGIN,\r\n                    label: x.USERNAME\r\n                })\r\n            )\r\n           this.setState({\r\n               user: data\r\n           })\r\n       })\r\n    \r\n    this.setState({\r\n        iddept: e.value\r\n    })\r\n}\r\n\r\ndata = (e) =>{\r\n  app.apiGet1('accessrepo',e.value)\r\n     .then(res =>{\r\n        this.setState({\r\n            data: res\r\n        })\r\n         \r\n     })  \r\n\r\n     this.setState({\r\n         iduser: e.value\r\n     }) \r\n}\r\n\r\nrefresh = () =>{\r\n    app.apiGet1('accessrepo',this.state.iduser)\r\n     .then(res =>{\r\n        this.setState({\r\n            data: res\r\n        })\r\n         \r\n     })  \r\n}\r\n\r\nmode = ()=>{\r\n    \r\n    if (this.state.iduser !== '') {\r\n        app.apiGet2('accessrepo/repo',this.state.iddept, this.state.iduser)\r\n        .then(res =>{\r\n            this.setState({\r\n                repo: res\r\n            })\r\n        })\r\n        \r\n        this.setState({\r\n            modal: !this.state.modal\r\n        })\r\n\r\n    }else{\r\n        app.msgerror('Belum Memilih User')\r\n    }\r\n\r\n    \r\n}\r\n\r\ndelete(idrepo){\r\n\r\n    app.apiDelete('accessrepo',{\r\n        id: idrepo\r\n    })\r\n       .then(data =>{\r\n           if (data) {\r\n               this.refresh();\r\n           }\r\n       })\r\n}\r\n\r\naction=(id)=>{\r\n    return <Button color=\"danger\" onClick={()=> this.delete(id)} size=\"sm\"> Delete Hak Akses </Button>\r\n}\r\n\r\n\r\n\r\nrender(){\r\n\r\n    return(\r\n        <Pageadmin head={'List Access Repository'}>\r\n                {\r\n                    app.dataUser[0].ACCESS === 2 ?\r\n                    <Row style={{marginBottom:'20px'}}>\r\n                        <Col md='3'>\r\n                            <FormGroup>\r\n                                <Select clearable={true} options={this.state.user} placeholder={'Pilih User'} onChange={this.data} />              \r\n                            </FormGroup>    \r\n                        </Col> \r\n                    </Row>\r\n\r\n                    :\r\n                    <Row style={{marginBottom:'20px'}}>\r\n                        <Col md='3'>\r\n                            <FormGroup>\r\n                                <Select options={this.state.sbu} placeholder={'Pilih SBU'} onChange={this.dpt} id='sbu' />\r\n                            </FormGroup>\r\n                        </Col>\r\n                        <Col md='3'>\r\n                            <FormGroup>\r\n                                <Select options={this.state.dpt} placeholder={'Pilih Division'} onChange={this.user} />\r\n                            </FormGroup>\r\n                        </Col>\r\n                        <Col md='3'>\r\n                            <FormGroup>\r\n                                <Select clearable={true} options={this.state.user} placeholder={'Pilih User'} onChange={this.data} />              \r\n                            </FormGroup>    \r\n                        </Col> \r\n                    </Row>\r\n                }\r\n            \r\n            <Button type=\"button\" color='default' className='mb--1' onClick={this.mode}>Tambah Akses Repository</Button>\r\n            <Formacc modal={this.state.modal} mode={this.mode} repo ={this.state.repo} user={this.state.iduser} test={this.refresh} />\r\n            <Scroll>\r\n                <Tabel data={this.state.data} columns={[\r\n                    {\r\n                        dataField: 'REPOSITORY',\r\n                        text: 'Priode'\r\n                    },\r\n                    {\r\n                        dataField: 'JENIS_REPO',\r\n                        text: 'Kategori'\r\n                    },\r\n                    {\r\n                        dataField: 'IDACC_REPO',\r\n                        formatter: this.action,\r\n                        text: 'Action'\r\n                    }\r\n                \r\n                ]} keyField={'IDACC_REPO'} width={{width:'380px'}} />\r\n               \r\n            </Scroll>\r\n        </Pageadmin>\r\n    )\r\n}\r\n\r\n}\r\n\r\nexport default listAccessmenu;"]},"metadata":{},"sourceType":"module"}